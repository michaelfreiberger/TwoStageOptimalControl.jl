<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Example 1 Myopic · TwoStageOptimalControl.jl</title><meta name="title" content="Example 1 Myopic · TwoStageOptimalControl.jl"/><meta property="og:title" content="Example 1 Myopic · TwoStageOptimalControl.jl"/><meta property="twitter:title" content="Example 1 Myopic · TwoStageOptimalControl.jl"/><meta name="description" content="Documentation for TwoStageOptimalControl.jl."/><meta property="og:description" content="Documentation for TwoStageOptimalControl.jl."/><meta property="twitter:description" content="Documentation for TwoStageOptimalControl.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TwoStageOptimalControl.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../Functions/MainFunction/">Main Functions</a></li><li><a class="tocitem" href="../../Functions/ParametersVariablesSettings/">Parameters, Variables, Settings</a></li><li><a class="tocitem" href="../../Functions/ResultsHandling/">Results analysis</a></li><li><a class="tocitem" href="../../Functions/AuxiliaryFunction/">Auxiliary functions</a></li><li><a class="tocitem" href="../../Functions/LineSearch/">LineSearch</a></li><li><a class="tocitem" href="../../Functions/ModelFunctions/">Model Functions</a></li><li><a class="tocitem" href="../../Functions/StateSolvers/">State Solvers</a></li><li><a class="tocitem" href="../Test1/">Example 1</a></li><li class="is-active"><a class="tocitem" href>Example 1 Myopic</a><ul class="internal"><li><a class="tocitem" href="#First-stage-solution"><span>First stage solution</span></a></li><li><a class="tocitem" href="#Second-stage-solution"><span>Second stage solution</span></a></li></ul></li><li><a class="tocitem" href="../Test2/">Example 2</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Example 1 Myopic</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Example 1 Myopic</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/michaelfreiberger/TwoStageOptimalControl.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/michaelfreiberger/TwoStageOptimalControl.jl/blob/master/docs/src/Examples/Test1Myopic.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Capital-accumulation-problem-for-a-myopic-planer"><a class="docs-heading-anchor" href="#Capital-accumulation-problem-for-a-myopic-planer">Capital accumulation problem for a myopic planer</a><a id="Capital-accumulation-problem-for-a-myopic-planer-1"></a><a class="docs-heading-anchor-permalink" href="#Capital-accumulation-problem-for-a-myopic-planer" title="Permalink"></a></h1><p>We can also use the solver to solve the capital accumulation problem from <a href="../Test1/">Example 1</a> for a myopic planer. Myopic planer means that the planer is not aware of the risk of a shock occuring and behaves accordingly. However, once the shock has occured the planer adjusts its behaviour according to the new system.</p><h2 id="First-stage-solution"><a class="docs-heading-anchor" href="#First-stage-solution">First stage solution</a><a id="First-stage-solution-1"></a><a class="docs-heading-anchor-permalink" href="#First-stage-solution" title="Permalink"></a></h2><p>We start by solving the first stage problem without shock. This can be easily achieved by setting the dimension of the state and control variables of the second stage equal to zero.</p><pre><code class="language-julia-repl hljs">julia&gt; MyPara[&quot;nCon_dist&quot;] = 0
julia&gt; MyPara[&quot;nStat_dist&quot;] = 0</code></pre><p>Note, that we could theoretically also reduce the dimensions of the state variables by 1, as we do not need to model the survival probability in this scenario. However, calculating and following the dynamics of one additional state variable does not significantly increase the computation effort and first and foremost has no effect on the optimal solution.</p><p>After defining the functions for the first stage as in <a href="../Test1/">Example 1</a></p><pre><code class="language-julia-repl hljs">julia&gt; U(Con, Stat, t::Float64, Para::Dict) = Stat[2]*(Stat[1]^0.5 - Con[1]^2)
julia&gt; f1(Con,Stat, t::Float64, Para::Dict) = [Con[1] - Para[&quot;delta&quot;]*Stat[1]]
julia&gt; S1(Stat, Para::Dict) = 0</code></pre><p>we can again define some intial guesses for the control profiles. This is optional, but if we want to provide a starting guess for the first stage solution, we also have to provide an intial guess for the second stage variables. However, note that the last dimension of <code>Results[&quot;Con_dist&quot;]$</code> is equal to zero.</p><pre><code class="language-julia-repl hljs">julia&gt; Results = Dict()
julia&gt; Results[&quot;Con&quot;] = 4.0*ones(1,100,1)
julia&gt; Results[&quot;Con_dist&quot;] = 4.0*ones(100,100,0)</code></pre><p>Finally, we can call the main function with just providing the first stage functions.</p><pre><code class="language-julia-repl hljs">julia&gt; Results = TwoStageOptimisation(Results = Results,UserParameters = MyPara,
                                ObjectiveIntegrand1 = U, 
                                StateDynamic1 = f1,
                                SalvageFunction1=S1)</code></pre><h2 id="Second-stage-solution"><a class="docs-heading-anchor" href="#Second-stage-solution">Second stage solution</a><a id="Second-stage-solution-1"></a><a class="docs-heading-anchor-permalink" href="#Second-stage-solution" title="Permalink"></a></h2><p>For the optimal reactions after the shock, we can follow the strategy below. First, we again define the system dynamics of the second stage as in <a href="../Test1/">Example 1</a>.</p><pre><code class="language-julia-repl hljs">julia&gt; Q(Con,Stat, t::Float64,s::Float64, Para::Dict) = Stat[2]*(Stat[1]^0.5 - Con[1]^2)
julia&gt; f2(Con,Stat, t::Float64, s::Float64, Para::Dict) = [Con[1] - Para[&quot;delta&quot;]*Stat[1], 0]
julia&gt; g(Con,Stat,t::Float64, Para::Dict) = [(1-Para[&quot;gamma&quot;])*Stat[1],Para[&quot;eta&quot;]*Stat[2]]</code></pre><p>Furthermore, we need to adjust the parameters of the dimensions of the second stage to their actual values:</p><pre><code class="language-julia-repl hljs">julia&gt; MyPara[&quot;nCon_dist&quot;] = 1
julia&gt; MyPara[&quot;nStat_dist&quot;] = 2</code></pre><p>We can then use the option to set the parameters &quot;FixedControl1&quot; equal to a list of all dimensions of the model (in this case just 1)</p><pre><code class="language-julia-repl hljs">julia&gt; Para2[&quot;FixedControl1&quot;] = [1]</code></pre><p>If we now provide the optimal solution of the first-stage-only solution as an initial guess to the solver, this solution will not be changed in the process. We just need to define the initial guess for the second stage solution:</p><pre><code class="language-julia-repl hljs">julia&gt; Results[&quot;Con_dist&quot;] = 4.0*ones(size(Results[&quot;Con&quot;])[2],size(Results[&quot;Con&quot;])[2],1)</code></pre><p>If we consequently call the main optimisation function, the second stage gets solved for all possible shock timings simultaneously.</p><pre><code class="language-julia-repl hljs">julia&gt; Results = TwoStageOptimisation(Results = Results,UserParameters = MyPara,
                                ObjectiveIntegrand1 = U, 
                                AggregationIntegrand2 = Q,
                                StateDynamic1 = f1,
                                StateDynamic2 = f2, 
                                Shock12 = g,
                                SalvageFunction1=S1,
                                SalvageFunction2=S2)</code></pre><p>And again, we can save and plot the results.</p><pre><code class="language-julia-repl hljs">julia&gt; SaveResults(Results,&quot;CapitalAccumulationMyopic&quot;)
julia&gt; PlotResults(Results,SavePlot = true)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Test1/">« Example 1</a><a class="docs-footer-nextpage" href="../Test2/">Example 2 »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 13 August 2025 21:41">Wednesday 13 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
